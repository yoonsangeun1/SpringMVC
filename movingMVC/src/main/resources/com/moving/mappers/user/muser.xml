<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mUser">
	<!-- 닉네임 중복체크 -->
	<select id="nickCheck" parameterType="java.lang.String" resultType="com.moving.domain.MUserVO"> 
							<!-- pType과 rType 생략가능 , pType String , rType MUserVO로 축약가능  --> 
		select * from m_user where nickname=#{nickname}
	</select>
	
	<!-- 이메일 중복체크 -->
	<select id="emailCheck" parameterType="java.lang.String" resultType="com.moving.domain.MUserVO"> 
							<!-- pType과 rType 생략가능 , pType String , rType MUserVO로 축약가능  --> 
		select * from m_user where email=#{email}
	</select>
	
	<!-- 회원저장 -->
	<insert id="insertUser">
		insert into m_user (id,userid,name,nickname,email,password,phone,genre01,genre02,genre03)
		 values(m_user_seq.nextval,#{email},#{name},#{nickname},#{email},#{password},#{phone},#{genre01},#{genre02},#{genre03})
	</insert>
	
	<!-- 비번찾기 > 회원정보검색 -->
	<select id="pwd_find" resultType="mUserVO">
		select * from m_user where email=#{email} and name=#{name}
	</select>
	
	<!-- 임시 비번수정 -->
	<update id="pwd_edit">
		update m_user set password=#{password}
		where email=#{email}
	</update>
	
	<!-- 이메일 아이디 찾기 > 회원정보 검색 -->
	<select id="email_find" resultType="mUserVO">
		select * from m_user where name=#{name} and phone=#{phone}
	</select>
	
	<!-- 	로그인인증 -->
	<select id="login_check" resultType="mUserVO">
		select * from m_user where email=#{mLogin_email}
		and userStatus=1
	</select>
	
<!-- 	회원정보수정 -->
<!-- 	<update id="m_edit"> -->
<!-- 		update member set mem_pwd=#{mem_pwd},mem_name=#{mem_name},mem_phone01=#{mem_phone01},mem_phone02=#{mem_phone02} -->
<!-- 		,mem_phone03=#{mem_phone03},mail_id=#{mail_id},mail_domain=#{mail_domain} -->
<!-- 		where mem_id=#{mem_id} -->
<!-- 	</update> -->
	
<!-- 	회원탈퇴 -->
<!-- 	<update id="m_del"> -->
<!-- 		update member set mem_delcont=#{mem_delcont}, mem_state=2, mem_deldate=sysdate where mem_id=#{mem_id} -->
<!-- 	</update> -->

</mapper>



